3 44 50 39
00000
00000
00000
00000
00000
00000
00000
00000
00103486924STR:DB 'Hi$'
001320000COUNT:DW    00
00130
00130
00130
00130
00130
00130
00130
00130
00130
00130
00200COUNTSTR:
00200
0020150    PUSH AX20
00200
00214C7C30000    MOV BX, 0            ; Reset counter20
00250LOOPCS:
002528A00    MOV AL, [SI+BX]        ; Load the next char 20
00272FFC3    INC BX20
0029380F824    CMP AL, '$'            ; Compare the char to '$'20
002C275F7    JNE LoopCS            ; If it is equal, then quit subroutine and return to calling code20
002E2FFCB    DEC BX                ; Point to the next char to be counted20
00300QUITCS:
00300
0030158    POP AX20
00311C3    RET20
00310
00320MAIN:
00324C7C40000    MOV SP, 0000h        ; Initialize the SP20
00364C7C61000    MOV SI, STR            ; Load the starting address of the string to be printed20
003A3E8E3FF    CALL countStr        ; Call printStr to print the string20
003D4891E1300    MOV [COUNT],BX        ; Save length of STR to variable COUNT20
00411F4    HLT                    ; Quit20
00410
00410end main
